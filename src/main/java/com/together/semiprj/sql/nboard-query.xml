<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">

<properties>
	<entry key="count-all-nboard-list">
		SELECT COUNT(*) FROM BOARD
		WHERE BOARD_CD = ?
		AND STATUS_CD = 1
	</entry>
	<entry key="selectBoardList">
      SELECT CC.*, (SELECT COUNT(*) FROM "LIKE"  D WHERE D.BOARD_NO = CC.BOARD_NO) LIKECOUNT ,
		(SELECT COUNT(*) FROM REPLY  E WHERE E.BOARD_NO = CC.BOARD_NO) REPLYCOUNT,
		(SELECT COUNT(*) FROM "LIKE"  F WHERE F.BOARD_NO = CC.BOARD_NO 
		AND F.MEMBER_NO = ?) LIKEDONE , BOARD_PIC_NO, BOARD_PIC_PATH AS "MAINIMGPATH"
       FROM  (SELECT BB.*
            FROM(
            SELECT ROWNUM RNUM, AA.*
          FROM ( SELECT  A.BOARD_NO , A.BOARD_TITLE, A.BOARD_CONTENT, A.READ_COUNT , A.BOARD_CD,   
          CASE WHEN SYSDATE -A.CREATE_DT > 1
        THEN  TO_CHAR(A.CREATE_DT , 'YYYY-MM-DD')
        ELSE TO_CHAR(A.CREATE_DT , 'HH24:MI:SS') END AS "CREATE_DT",
         A.STATUS_CD, A.MEMBER_NO
          , B.BOARD_NAME , C.MEMBER_ID, C.ANIMAL_PROFILE_IMG FROM BOARD A
            JOIN BOARD_CODE  B ON (A.BOARD_CD = B.BOARD_CD)
            JOIN MEMBER  C ON (A.MEMBER_NO = C.MEMBER_NO)
		    WHERE A.STATUS_CD != 2 AND A.BOARD_CD = ?
            ORDER BY BOARD_NO DESC) AA) BB
            WHERE RNUM BETWEEN ? AND ? ) CC
            LEFT JOIN BOARD_PIC DD ON (  CC.BOARD_NO = DD.BOARD_NO)
            LEFT JOIN ANIMAL EE ON (CC.MEMBER_NO = EE.MEMBER_NO)
            ORDER BY RNUM
	</entry>
	<entry key="selectBoardView">
        SELECT DD.* ,ANIMAL_IMG_NO, (ANIMAL_IMG_PATH||ANIMAL_IMG_NM) AS "MAINANIMALPATH"
        FROM
        (SELECT CC.* ,
		(SELECT COUNT(*) FROM "LIKE"  D WHERE D.BOARD_NO = CC.BOARD_NO) LIKECOUNT ,
		(SELECT COUNT(*) FROM REPLY  E WHERE E.BOARD_NO = CC.BOARD_NO) REPLYCOUNT ,
		(SELECT COUNT(*) FROM "LIKE"  F WHERE F.BOARD_NO = CC.BOARD_NO 
		AND F.MEMBER_NO = ?) LIKEDONE 
		FROM (
		 SELECT  A.BOARD_NO , A.BOARD_TITLE, A.BOARD_CONTENT, A.READ_COUNT , A.BOARD_CD,
         CASE WHEN SYSDATE - A.CREATE_DT > 1
        THEN  TO_CHAR(A.CREATE_DT , 'YYYY-MM-DD')
        ELSE TO_CHAR(A.CREATE_DT , 'HH24:MI:SS') END AS "CREATE_DT",
         A.STATUS_CD, A.MEMBER_NO
          , B.BOARD_NAME , C.MEMBER_ID FROM BOARD A
            JOIN BOARD_CODE  B ON (A.BOARD_CD = B.BOARD_CD)
            JOIN MEMBER  C ON (A.MEMBER_NO = C.MEMBER_NO)
		    WHERE A.STATUS_CD != 2 AND A.BOARD_NO = ?) CC) DD 
            LEFT JOIN ANIMAL G ON ( G.MEMBER_NO = DD.MEMBER_NO)
            LEFT JOIN ANIMAL_IMG H ON ( H.ANIMAL_NO = G.ANIMAL_NO) 
            WHERE ANIMAL_IMG_LEVEL =0 OR ANIMAL_IMG_LEVEL IS NULL
	</entry>
	<entry key="readCountPlus">
		UPDATE BOARD 
		SET READ_COUNT = READ_COUNT + 1
		WHERE BOARD_NO = ?
	</entry>
	<entry key="selectBoardImageList">
		SELECT * FROM BOARD_PIC
		WHERE BOARD_NO = ?
		ORDER BY BOARD_PIC_LEVEL
	</entry>
	<entry key="selectNboardAnimalImgList">
		SELECT A.ANIMAL_NO , A.MEMBER_NO, C.* 
		FROM ANIMAL A
		JOIN ANIMAL_IMG C ON (A.ANIMAL_NO = C.ANIMAL_NO)
		WHERE A.MEMBER_NO = ?
		ORDER BY C.ANIMAL_NO ,C. ANIMAL_IMG_LEVEL
	</entry>
	<entry key="updateLikeCount">
		INSERT INTO "LIKE"
		VALUES(
		 ? , ?
		)
	</entry>
</properties>