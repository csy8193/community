<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">

<properties>
	<entry key="count-all-pboard-list">
		SELECT COUNT(*) FROM BOARD
		WHERE BOARD_CD = ?
		AND STATUS_CD = 1
	</entry>
	
	<entry key="selectPboardList">
		            SELECT CC.*, (SELECT COUNT(*) FROM "LIKE"  D WHERE D.BOARD_NO = CC.BOARD_NO) LIKECOUNT ,
      (SELECT COUNT(*) FROM REPLY  E WHERE E.BOARD_NO = CC.BOARD_NO) REPLYCOUNT,
      (SELECT COUNT(*) FROM "LIKE"  F WHERE F.BOARD_NO = CC.BOARD_NO 
      AND F.MEMBER_NO = ?) LIKEDONE
       FROM  (SELECT BB.*
            FROM(
            SELECT ROWNUM RNUM, AA.*
          FROM ( SELECT  A.BOARD_NO , A.BOARD_TITLE, A.BOARD_CONTENT, A.READ_COUNT , A.BOARD_CD,   
          CASE WHEN SYSDATE -A.CREATE_DT > 1
        THEN  TO_CHAR(A.CREATE_DT , 'YYYY-MM-DD')
        ELSE TO_CHAR(A.CREATE_DT , 'HH24:MI:SS') END AS "CREATE_DT",
         A.STATUS_CD, A.MEMBER_NO
          , B.BOARD_NAME , C.MEMBER_ID, C.ANIMAL_PROFILE_IMG FROM BOARD A
            JOIN BOARD_CODE  B ON (A.BOARD_CD = B.BOARD_CD)
            JOIN MEMBER  C ON (A.MEMBER_NO = C.MEMBER_NO)
          WHERE A.STATUS_CD != 2 AND A.BOARD_CD = ?
            ORDER BY BOARD_NO DESC) AA) BB
            WHERE RNUM BETWEEN ? AND ? ) CC
            LEFT JOIN ANIMAL EE ON (CC.MEMBER_NO = EE.MEMBER_NO)
            ORDER BY RNUM
		
	</entry>
	<entry key="selectPboardImageList">
		SELECT * FROM BOARD_PIC
		WHERE BOARD_NO = ?
		ORDER BY BOARD_PIC_LEVEL
	</entry>
	
	<!-- 상세페이지 조회 -->
	<entry key="selectPboard">
		SELECT BOARD_NO, BOARD_TITLE, BOARD_CONTENT,
        MEMBER_NO, MEMBER_NM,
        CASE WHEN TO_DATE(TO_CHAR(SYSDATE, 'YYYY-MM-DD')) - TO_DATE(TO_CHAR(CREATE_DT, 'YYYY-MM-DD')) = 0
            THEN TO_CHAR( CREATE_DT, 'HH24:MI' )
            ELSE TO_CHAR( CREATE_DT, 'YYYY-MM-DD' )
        END AS CREATE_DT,
        BOARD_CD, BOARD_NAME,
        READ_COUNT, STATUS_NM, STATUS_CD
		FROM BOARD B
		JOIN MEMBER USING(MEMBER_NO)
		JOIN BOARD_CODE USING(BOARD_CD)
		JOIN STATUS S ON(B.STATUS_CD = S.STATUS_CD)
		WHERE BOARD_NO = ?
		AND STATUS_CD != 2
	</entry>
	
	<!-- 조회수 증가 -->
	<entry key="increaseReadCount">
		UPDATE BOARD SET
		READ_COUNT = READ_COUNT + 1
		WHERE BOARD_NO = ?
	</entry>
	
	<!-- board 이름 가져오기 -->
	<entry key="boardNmCh">
		SELECT BOARD_NAME
		FROM BOARD_CODE
		WHERE BOARD_CD =?
	</entry>
</properties>