<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">

<properties>
	<entry key="pointRank">
        SELECT ROWNUM , DD.* FROM(
        SELECT CC.* , MM.ANIMAL_PROFILE_IMG
        FROM
        (SELECT CC.*, ANIMAL_NO, ANIMAL_NAME,ANIMAL_VARIETY, ANIMAL_SEX, 
        ANIMAL_BIRTH, ANIMAL_CATEGORY_NM
        FROM(
        SELECT MEMBER_NO , SUM(POINT_SCORE) TOTALP FROM POINT
		GROUP BY MEMBER_NO) CC
        LEFT JOIN ANIMAL ANI ON (ANI.MEMBER_NO=CC.MEMBER_NO)
        LEFT JOIN ANIMAL_CATEGORY CATE ON (CATE.ANIMAL_CATEGORY_CD=ANI.ANIMAL_CATEGORY_CD)) CC
        JOIN MEMBER MM ON(MM.MEMBER_NO = CC.MEMBER_NO)) DD
        WHERE ROWNUM BETWEEN 1 AND 7
        ORDER BY TOTALP DESC
	</entry>
	<entry key="getWalkHistory">
		SELECT SUM(CHECKWALK) COUNT, CREATE_DT DAY
        SELECT ROWNUM, DD.*
        FROM(
		SELECT CC.*
		FROM(
		SELECT MEMBER_NO, TOTALP, ANIMAL_NO, D.ANIMAL_NAME , 
		TO_CHAR(D.ANIMAL_BIRTH, 'YYYY-MM-DD') ANIMAL_BIRTH,
		ANIMAL_VARIETY,ANIMAL_SEX, ANIMAL_IMG_PATH||ANIMAL_IMG_NM AS "ANIMALIMG"
		FROM(
		SELECT MEMBER_NO , SUM(POINT_SCORE) TOTALP FROM POINT
		GROUP BY MEMBER_NO) BB
		LEFT JOIN ANIMAL D USING (MEMBER_NO)
		LEFT JOIN ANIMAL_IMG USING(ANIMAL_NO)) CC
		WHERE ROWNUM BETWEEN 1 AND 7
		ORDER BY TOTALP DESC) DD
	</entry>
	<entry key="checkWalk">
		SELECT SUM(CHECKWALK), CREATE_DT
		FROM
		(SELECT COUNT(BOARD_NO) CHECKWALK ,
		TO_NUMBER( TO_CHAR(CREATE_DT, 'DD')  ) CREATE_DT
		FROM BOARD
		WHERE MEMBER_NO = ?
		AND STATUS_CD =1
		AND BOARD_CD = 100
		AND CREATE_DT BETWEEN TO_DATE(?) and TO_DATE(?)
		WHERE MEMBER_NO = 4
		AND STATUS_CD =1
		AND BOARD_CD = 100
		AND CREATE_DT BETWEEN ? AND ?
		GROUP BY CREATE_DT)
		GROUP BY CREATE_DT
		ORDER BY CREATE_DT
	</entry>
	<entry key="myPointAndRank">
	SELECT DD.*, C.ANIMAL_NAME FROM
		(SELECT MEMBER_NO, SUM(POINT_SCORE) TOTALP FROM POINT
		JOIN MEMBER USING (MEMBER_NO)
		WHERE MEMBER_NO = ?
	</entry>
	<entry key="mywalkrank">
		SELECT DD.*, C.ANIMAL_NAME FROM
		(SELECT MEMBER_NO, SUM(POINT_NO) TOTALP FROM POINT
		JOIN MEMBER USING (MEMBER_NO)
		WHERE MEMBER_NO = 4
		GROUP BY MEMBER_NO
		ORDER BY TOTALP) DD
		LEFT JOIN ANIMAL C ON (C.MEMBER_NO = DD.MEMBER_NO)
		LEFT JOIN ANIMAL_IMG D ON (C.ANIMAL_NO = D.ANIMAL_NO)
	</entry>
	<entry key="mymonthrank">
		SELECT ROWNUM MYRANK FROM (
        SELECT MEMBER_NO, SUM(POINT_SCORE) TOTALP FROM POINT
		GROUP BY MEMBER_NO) BB
        WHERE MEMBER_NO = ?
	</entry>
	<entry key="walkinsert">
		INSERT INTO VALUES(
		SEQ_BOARD_NO.NEXTVAL , NULL, ? , SYSDATE , 0 ,  100 , 1 , ?
		)
	</entry>
	<entry key="getWalkHistory">
		SELECT SUM(CHECKWALK) COUNT, CREATE_DT DAY
		FROM
		(SELECT COUNT(BOARD_NO) CHECKWALK ,
		TO_NUMBER( TO_CHAR(CREATE_DT, 'DD')  ) CREATE_DT
		FROM BOARD
		WHERE MEMBER_NO = ?
		AND STATUS_CD =1
		AND BOARD_CD = 100
		AND CREATE_DT BETWEEN TO_DATE(?) and TO_DATE(?)
		GROUP BY CREATE_DT)
		GROUP BY CREATE_DT
		ORDER BY CREATE_DT
	</entry>
</properties>