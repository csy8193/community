<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">

<properties>

<entry key="pointRank">
SELECT ROWNUM , ENDS.* 
FROM(SELECT CC.MEMBER_NO, CC.ANIMAL_NO , AN.ANIMAL_NAME, 
AN.ANIMAL_VARIETY,SUBSTR(M.MEMBER_ID, 1, LENGTH(M.MEMBER_ID)-3)||LPAD('*',3,'*') MEMBER_ID, 
M.ANIMAL_PROFILE_IMG ,THIS.TOTALP 
FROM(SELECT * FROM
(SELECT ZZ.MEMBER_NO , MIN(ANIMAL_NO) ANIMAL_NO FROM
(SELECT MEMBER_NO , SUM(POINT_SCORE) TOTALP FROM POINT
GROUP BY MEMBER_NO) ZZ
LEFT JOIN ANIMAL ANI ON (ZZ.MEMBER_NO = ANI.MEMBER_NO)GROUP BY 
ZZ.MEMBER_NO)JOIN ( SELECT MEMBER_NO , SUM(POINT_SCORE) TOTALP FROM POINT
GROUP BY MEMBER_NO) USING (MEMBER_NO)ORDER BY TOTALP DESC) CC
JOIN MEMBER M ON (CC.MEMBER_NO =M.MEMBER_NO )
LEFT JOIN ANIMAL AN ON(CC.ANIMAL_NO = AN.ANIMAL_NO)
JOIN (SELECT MEMBER_NO , SUM(POINT_SCORE) TOTALP FROM POINT
GROUP BY MEMBER_NO) THIS ON (THIS. MEMBER_NO = CC.MEMBER_NO)
ORDER BY TOTALP DESC) ENDS
WHERE ROWNUM BETWEEN 1 AND 10
</entry>

<entry key="myPointAndRank">
SELECT EE.*, C.ANIMAL_NAME
FROM(SELECT MEMBER_NO, SUM(POINT_SCORE) TOTALP FROM POINT
WHERE MEMBER_NO=?GROUP BY MEMBER_NO) EE
LEFT JOIN ANIMAL C ON(C.MEMBER_NO = EE.MEMBER_NO)
</entry>

<entry key="mywalkrank">
SELECT DD.*, C.ANIMAL_NAME FROM
(SELECT MEMBER_NO, SUM(POINT_SCORE) TOTALP FROM POINT
JOIN MEMBER USING (MEMBER_NO)WHERE MEMBER_NO = ?GROUP BY MEMBER_NO
ORDER BY TOTALP) DD
LEFT JOIN ANIMAL C ON (C.MEMBER_NO = DD.MEMBER_NO)
LEFT JOIN ANIMAL_IMG D ON (C.ANIMAL_NO = D.ANIMAL_NO) 
</entry>

<entry key="mymonthrank">
SELECT DD.* 
FROM(SELECT ROWNUM MYRANK, CC.*
FROM (SELECT MEMBER_NO ,TOTALP 
FROM (SELECT MEMBER_NO, SUM(POINT_SCORE) TOTALP FROM POINT
GROUP BY MEMBER_NO) BB
ORDER BY TOTALP DESC) CC) DD
WHERE MEMBER_NO = ? 
</entry>

<entry key="walkinsert">INSERT INTO BOARD VALUES(SEQ_BOARD_NO.NEXTVAL , NULL, ? , SYSDATE , 0 , 100 , 1 , ?) 
</entry>

<entry key="getWalkHistory">
SELECT SUM(CHECKWALK) COUNT, CREATE_DT DAY
FROM(SELECT COUNT(BOARD_NO) CHECKWALK ,TO_NUMBER( TO_CHAR(CREATE_DT, 'DD') ) 
CREATE_DT
FROM BOARD
WHERE MEMBER_NO = ?AND STATUS_CD =1
AND BOARD_CD = 100
AND CREATE_DT BETWEEN TO_DATE(?) and TO_DATE(?)
GROUP BY CREATE_DT)GROUP BY CREATE_DT
ORDER BY CREATE_DT 
</entry>

<entry key="selectWalkList">
SELECT * FROM BOARD WHERE BOARD_CD = 100
AND MEMBER_NO = ?
AND EXTRACT(YEAR FROM CREATE_DT) = EXTRACT(YEAR FROM SYSDATE)
AND EXTRACT(MONTH FROM CREATE_DT) = EXTRACT(MONTH FROM SYSDATE)
AND EXTRACT(DAY FROM CREATE_DT) = EXTRACT(DAY FROM SYSDATE) 
</entry>

<entry key="walkPointGet">
INSERT INTO POINT VALUES (SEQ_POINT_NO.NEXTVAL, ? , SYSDATE , ?) </entry>

<entry key="duplpointcheck">
SELECT COUNT(*) POINTDUPL FROM BOARD WHERE BOARD_CD = 100
AND MEMBER_NO = ?AND EXTRACT(YEAR FROM CREATE_DT) = EXTRACT(YEAR FROM SYSDATE)
AND EXTRACT(MONTH FROM CREATE_DT) = EXTRACT(MONTH FROM SYSDATE)
AND EXTRACT(DAY FROM CREATE_DT) = EXTRACT(DAY FROM SYSDATE) 
</entry>

<entry key="walkdayshow">
SELECT ROWNUM, BOARD_NO, BOARD_TITLE, 
BOARD_CONTENT,TO_CHAR(CREATE_DT , 'YYYY-MM-DD') 
CREATE_DT
FROM BOARD
WHERE BOARD_CD = 100
AND MEMBER_NO = ?AND EXTRACT(YEAR FROM CREATE_DT) = ?
AND EXTRACT(MONTH FROM CREATE_DT) = ?
AND EXTRACT(DAY FROM CREATE_DT) = ?
AND ROWNUM BETWEEN 1 AND 5 
</entry>

</properties>