<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">

<properties>
	<entry key="selectReplyList">
    SELECT CC.* , NVL( E.ANIMAL_IMG_PATH, 'NULL') ANIMAL_IMG_PATH, NVL( E.ANIMAL_IMG_NM , 'NULL') ANIMAL_IMG_NM, D.ANIMAL_NO,
    (SELECT COUNT(*) FROM ANIMAL_IMG WHERE ANIMAL_IMG_LEVEL=0 AND ANIMAL_NO = D.ANIMAL_NO) PROFILEEXIST
    FROM(
	SELECT A.REPLY_NO, A.REPLY_CONTENT,
	TO_CHAR(A.REPLY_CREATE_DT, 'YYYY"년" MM"월" DD"일" HH24"시" MI"분" SS"초"') REPLY_CREATE_DT,
	A.BOARD_NO, A.MEMBER_NO, B.MEMBER_ID, 
	A.STATUS_CD,  C.STATUS_NM, NVL( A.FEEDBACK , 0) FEEDBACK
	FROM "REPLY" A
	JOIN MEMBER B ON (A.MEMBER_NO = B.MEMBER_NO)
    JOIN STATUS C ON (A.STATUS_CD = C.STATUS_CD)
	AND BOARD_NO = ? ) CC
    LEFT JOIN ANIMAL D ON (CC.MEMBER_NO = D.MEMBER_NO)
    LEFT JOIN ANIMAL_IMG E ON ( D.ANIMAL_NO = E.ANIMAL_NO)
    WHERE ANIMAL_IMG_LEVEL = 0 OR ANIMAL_IMG_LEVEL IS NULL
	ORDER BY REPLY_NO
	</entry>
	<entry key="insertReply">
	INSERT INTO REPLY
	VALUES(SEQ_REPLY_NO.NEXTVAL , ? ,SYSDATE ,? , ? , 1 , ?)
	</entry>
	<entry key="deleteReply">
	UPDATE REPLY
	SET STATUS_CD = 2
	WHERE REPLY_NO = ?
	</entry>
	<entry key="updateReply">
	UPDATE REPLY
	SET REPLY_CONTENT = ?
	WHERE REPLY_NO = ?
	</entry>
</properties>